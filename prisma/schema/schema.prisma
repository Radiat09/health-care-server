// prisma/schema/schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Include all other schema files
// Add the content from enum.prisma here
enum UserRole {
  SUPER_ADMIN
  ADMIN
  DOCTOR
  PATIENT
}

enum UserStatus {
  ACTIVE
  BLOCKED
  DELETED
}

enum UserGender {
  MALE
  FEMALE
}
model User {
  id                 String      @id @default(cuid())
  name               String
  email              String      @unique
  password           String
  role               UserRole    @default(PATIENT)
  needPasswordChange Boolean     @default(true)
  status             UserStatus  @default(ACTIVE)
  createdAt          DateTime    @default(now())
  updatedAt          DateTime    @updatedAt
  admin              Admin?
  doctor             Doctor?
  patient            Patient?

  @@map("users")
}
model Admin {
  id            String   @id @default(uuid())
  name          String
  email         String   @unique
  profilePhoto  String?
  contactNumber String
  isDeleted     Boolean  @default(false)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  user          User     @relation(fields: [email], references: [email])

  @@map("admins")
}
model Doctor {
  id                    String      @id @default(uuid())
  name                  String
  email                 String      @unique
  profilePhoto          String?
  contactNumber         String
  address               String
  registrationNumber    String
  experience            Int         @default(0)
  gender                UserGender
  appointmentFee        Int
  qualification         String
  currentWorkingPlace   String
  designation           String
  isDeleted             Boolean     @default(false)
  createdAt             DateTime    @default(now())
  updatedAt             DateTime    @updatedAt
  user                  User        @relation(fields: [email], references: [email])
  doctorSchedules       DoctorSchedules[]
  doctorSpecialities     DoctorSpecialities[]
  @@map("doctors")
}

model Patient {
  id           String   @id @default(uuid())
  name         String
  email        String   @unique
  address      String?
  profilePhoto String?
  isDeleted    Boolean  @default(false)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  user         User     @relation(fields: [email], references: [email])

  @@map("patients")
}
// Add the content from specialty.prisma here
model Specialities {
  id                String              @id @default(uuid())
  title             String
  icon              String
  doctorSpecialties DoctorSpecialities[]

  @@map("specialities")
}

model DoctorSpecialities {
  specialitiesId String
  specialities   Specialities @relation(fields: [specialitiesId], references: [id])

  doctorId String
  doctor   Doctor @relation(fields: [doctorId], references: [id])

  @@id([specialitiesId, doctorId])
  @@map("doctor_specialities")
}

// Add the content from schedule.prisma here
model Schedule {
  id        String   @id @default(uuid())
  startDate DateTime
  endDate   DateTime
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  doctorSchedules DoctorSchedules[]
}

model DoctorSchedules {
  scheduleId String
  schedule   Schedule @relation(fields: [scheduleId], references: [id])

  doctorId String
  doctor   Doctor @relation(fields: [doctorId], references: [id])

  @@id([scheduleId, doctorId])
  @@map("doctor_schedules")
}

